<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/CSS/styleUp.css" />
    <link rel="stylesheet" href="/CSS/search.css" />
    <script
      src="https://kit.fontawesome.com/1289fe8b16.js"
      crossorigin="anonymous"
    ></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./navbar.css" type="text/css">
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>User Profile</title>
  </head>
  <body>
    <div class="sidebar">
      <!-- <div class="logo"></div> -->
      <!-- LEP -->

      <ul>
        <li id="top">
          <a href="/"
            ><span> LEP</span></i></a>
        </li>
        <li>
          <a href="#" id="pro"><i class="fa-solid fa-user"></i> <span> Profile</span></a>
        </li>
        <li>
          <a href="#" id="his"
            ><i class="fa-solid fa-receipt"></i> <span> History</span></a
          >
        </li>
        <li>
          <a href="#" id="book"
            ><i class="fa-solid fa-book-open"></i> <span>Booking</span></a
          >
        </li>
        <li>
          <a href="#"
            ><i class="fa-solid fa-credit-card"></i> <span>Payment</span></a
          >
        </li>
        <li>
          <a href="#" id="logOut"
            ><i class="fa-solid fa-right-from-bracket"></i> <span>Log out</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="main">
      <div class="topbar">
        <div class="toggle">
          <span> <i class="fa-solid fa-bars"></i></span>
        </div>
      </div>
       <div class="display">
           <div class="headings list-group">
              <h4 class="list-group-item list-group-item-action">Username :-<p class="fetch"> <%= d.username %> </p></h4> 
        
              <h4 class="list-group-item list-group-item-action">Email :-<p class="fetch"><%=  d.email %> </p>  </h4>
              <h4 class="list-group-item list-group-item-action">Firstname :-<p class="fetch"></p> <%=  d.fname %></p></h4>
              <h4 class="list-group-item list-group-item-action">Lastname :<p class="fetch"> <%= d.lname %></p></h4>
              <h4 class="list-group-item list-group-item-action">Gender :-<p class="fetch"> <%= d.gender %></p></h4>
              <h4 class="list-group-item list-group-item-action">Address :-<p class="fetch"> <%= d.address %></p></h4>
              <h4 class="list-group-item list-group-item-action">Address :-<p class="fetch"> <%=    d.pincode %></p></h4>
              <h4 class="list-group-item list-group-item-action">Dob :-<p class="fetch"> <%= d.dob %></h4></p>
              <h4 class="list-group-item list-group-item-action">mobile number:-<p class="fetch"> <%=  d.phone %></p></h4>
            
              <form action="/delete" method="post">
             <input type="submit" value="Delete" class="btn btn-danger">
              </form>
 &nbsp;
 &nbsp;
  &nbsp;
              <form action="/update-user" method="post">
                <input type="submit" value="Update" class="btn btn-info">
              </form>
               
          </div>
          </div>
             
            </div>
            <div id="history">
              <h3 id="historyHead">Your Booking History:</h3>
              <div id="historyBox">
                <% if(udata.length!=0){ udata.forEach(function(data){%>
                  <% if (data.status=='pending' ) { %>
                    <div class="historyCards">
                      <span class="employer quesans"><span class="ques">Employer Name:</span><span class="ans">
                          <%=data.employer%>
                        </span></span>
                      <span class="employee quesans"><span class="ques">Employee Name:</span><span class="ans">
                          <%=data.employee%>
                        </span></span>
                      <span class="date quesans"><span class="ques">Date Of Booking:</span><span class="ans">
                          <%=data.date%>
                        </span></span>
                      <span class="timeslot quesans"><span class="ques">Time-Slot Choosed:</span><span class="ans">
                          <%=data.timeslot%>
                        </span></span>
                      <span class="timeslot quesans"><span class="ques">Status:</span><span class="ans">
                          <%=data.status%>
                        </span></span>
                      <form action="/order/cancel" method="post">
                        <input type="text" name="username" value="<%=data.employee%>" style="display: none">
                        <input type="text" name="timeslot" value="<%=data.timeslot%>" style="display: none">
                        <input type="submit" value="cancel" class="btn btn-danger btn-lg">
                      </form>
        
                      <form action="/order/complete" method="post">
                        <input type="text" name="username" value="<%=data.employee%>" style="display: none">
                        <input type="text" name="timeslot" value="<%=data.timeslot%>" style="display: none">
                        <input type="submit" value="complete" class="btn btn-lg btn-info">
                      </form>
                    </div>
                    <% }else{%>
                      <div class="historyCards">
                        <span class="employer quesans"><span class="ques">Employer Name:</span><span class="ans">
                            <%=data.employer%>
                          </span></span>
                        <span class="employee quesans"><span class="ques">Employee Name:</span><span class="ans">
                            <%=data.employee%>
                          </span></span>
                        <span class="date quesans"><span class="ques">Date Of Booking:</span><span class="ans">
                            <%=data.date%>
                          </span></span>
                        <span class="timeslot quesans"><span class="ques">Time-Slot Choosed:</span><span class="ans">
                            <%=data.timeslot%>
                          </span></span>
                        <span class="timeslot quesans"><span class="ques">Status:</span><span class="ans">
                            <%=data.status%>
                          </span></span>
        
                      </div>
        
                      <%}%>
                        <% }) %>
                          <% } %>
        
        
              </div>
            </div>
         
          <div id="booki">

            <h3 id="bookiHead">Your Bookings:</h3>
            <div id="bookiBox">
              <% if(udata.length!=0){ udata.forEach(function(data){%>
                <% if (data.status=='pending' ) { %>
                  <div class="bookiCards">
                    <span class="employer quesans"><span class="ques">Employer Name:</span><span class="ans">
                        <%=data.employer%>
                      </span></span>
                    <span class="employee quesans"><span class="ques">Employee Name:</span><span class="ans">
                        <%=data.employee%>
                      </span></span>
                    <span class="date quesans"><span class="ques">Date Of Booking:</span><span class="ans">
                        <%=data.date%>
                      </span></span>
                    <span class="timeslot quesans"><span class="ques">Time-Slot Choosed:</span><span class="ans">
                        <%=data.timeslot%>
                      </span></span>
                    <span class="timeslot quesans"><span class="ques">Status:</span><span class="ans">
                        <%=data.status%>
                      </span></span>
                    <form action="/order/cancel" method="post">
                      <input type="text" name="username" value="<%=data.employee%>" style="display: none">
                      <input type="text" name="timeslot" value="<%=data.timeslot%>" style="display: none">
                      <input type="submit" value="cancel" class="btn btn-danger btn-lg">
                    </form>
        
                    <form action="/order/complete" method="post">
                      <input type="text" name="username" value="<%=data.employee%>" style="display: none">
                      <input type="text" name="timeslot" value="<%=data.timeslot%>" style="display: none">
                      <input type="submit" value="complete" class="btn btn-lg btn-info">
                    </form>
                  </div>
                  <% } %>
                    <% }) %>
                      <% } %>
        
        
        
            </div>
          </div>
     
  
    <script>
      document.getElementById("his").onclick = function() {
    document.getElementById("display").style.display = "none";
    document.getElementById("history").style.display = "flex";
    document.getElementById("booki").style.display = "none";
  }
  document.getElementById("pro").onclick = function() {
    document.getElementById("display").style.display = "flex";
    document.getElementById("history").style.display = "none";
    document.getElementById("booki").style.display = "none";
  } 
   document.getElementById("book").onclick = function() {
    document.getElementById("display").style.display = "none";
    document.getElementById("history").style.display = "none";
      document.getElementById("booki").style.display = "flex";
  }
  const toggle = document.querySelector(".toggle");
      const main = document.querySelector(".main");
      const sidebar = document.querySelector(".sidebar");

      toggle.onclick = function () {
        sidebar.classList.toggle("active");
        main.classList.toggle("active");
      };
    </script>
  </body>
</html>
